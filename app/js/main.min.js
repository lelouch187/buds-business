document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector(".cookie");document.querySelectorAll(".cookie__button").forEach((t=>t.addEventListener("click",(()=>{e.classList.add("hide")}))));const t=document.querySelector(".modal"),r=document.querySelectorAll(".button_primary--dark"),s=[document.querySelector(".input__name"),document.querySelector(".input__email"),document.querySelector(".input__phone")],a=document.querySelector(".flag"),c=document.querySelectorAll(".modal__input__error"),o=document.querySelector(".modal__error"),l=document.querySelector(".modal__button"),n=document.querySelector(".modal__close"),i=document.querySelector(".modal_succsess"),d=[document.querySelector(".modal_succsess__close"),document.querySelector(".modal_succsess__button")];s.forEach(((e,t)=>{e.addEventListener("blur",(e=>{e.target.value.trim()?(c[t].classList.remove("error"),function(e,t){let r=!1;return t.forEach((t=>{t.classList.contains(e)&&(r=!0)})),r}("error",c)||o.classList.remove("error")):(c[t].classList.add("error"),o.classList.add("error")),!function(e){let t=!1;return e.forEach((e=>{e.value||(t=!0)})),t}(s)?l.disabled=!1:l.disabled=!0}))})),r.forEach((e=>{e.addEventListener("click",(()=>{i.classList.remove("active"),e.classList.contains("modal__button")||t.classList.add("active"),e.classList.contains("modal__button")||e.classList.add("pressed")}))})),n.addEventListener("click",(()=>{t.classList.remove("active"),r.forEach((e=>{e.classList.contains("modal__button")||e.classList.remove("pressed")}))})),l.addEventListener("click",(e=>{e.preventDefault(),t.classList.remove("active"),i.classList.add("active")})),d.forEach((e=>{e.addEventListener("click",(()=>{i.classList.remove("active")}))}));let u=document.querySelectorAll(".input__phone"),m=function(e){return e.value.replace(/\D/g,"")},v=function(e){let t=e.target,r=m(t),s=e.clipboardData||window.clipboardData;if(s){let e=s.getData("Text");if(/\D/g.test(e))return void(t.value=r)}},_=function(e){let t=e.target,r=m(t),s=t.selectionStart,c="";if(!r)return t.value="";if(t.value.length==s){if(["7","8","9"].indexOf(r[0])>-1){a.classList.add("active"),"9"==r[0]&&(r="7"+r);let e="8"==r[0]?"8":"+7";c=t.value=e+" ",r.length>1&&(c+="("+r.substring(1,4)),r.length>=5&&(c+=") "+r.substring(4,7)),r.length>=8&&(c+="-"+r.substring(7,9)),r.length>=10&&(c+="-"+r.substring(9,11))}else a.classList.remove("active"),c="+"+r.substring(0,16);t.value=c}else e.data&&/\D/g.test(e.data)&&(t.value=r)},L=function(e){let t=e.target.value.replace(/\D/g,"");8==e.keyCode&&1==t.length&&(e.target.value="")};for(let e of u)e.addEventListener("keydown",L),e.addEventListener("input",_,!1),e.addEventListener("paste",v,!1)}));